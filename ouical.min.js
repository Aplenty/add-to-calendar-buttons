var createAddToCalendarLinks=function(e){var t=document.createElement("div");var n=60*1e3;var r=function(e){return e.toISOString().replace(/[-:]|(\.\d{3})/g,"")};var i=function(e){var t=r(e.start);var i=r(new Date(e.start.getTime()+e.duration*n));var s=function(e){var n=encodeURI(["https://www.google.com/calendar/render","?action=TEMPLATE","&text="+(e.title||""),"&dates="+(t||""),"/"+(i||""),"&details="+(e.description||""),"&location="+(e.address||""),"&sprop=&sprop=name:"].join(""));return'<a class="icon-google" target="_blank" href="'+n+'">Add to Google</a>'};var o=function(e){var t=e.duration<600?"0"+Math.floor(e.duration/60):Math.floor(e.duration/60);var n=e.duration%60<10?"0"+e.duration%60:e.duration%60;var i=t+n;var s=encodeURI(["http://calendar.yahoo.com/?v=60&view=d&type=20","&title="+(e.title||""),"&st="+(r(new Date(e.start-240*6e4))||""),"&dur="+(i||""),"&desc="+(e.description||""),"&in_loc="+(e.address||"")].join(""));return'<a class="icon-yahoo" target="_blank" href="'+s+'">Add to Yahoo</a>'};var u=function(e,n,r){var s=encodeURI("data:text/calendar;charset=utf8,"+["BEGIN:VCALENDAR","VERSION:2.0","BEGIN:VEVENT","URL:"+document.URL,"DTSTART:"+(t||""),"DTEND:"+(i||""),"SUMMARY:"+(e.title||""),"DESCRIPTION:"+(e.description||""),"LOCATION:"+(e.address||""),"END:VEVENT","END:VCALENDAR"].join("\n"));return'<a class="'+n+'" target="_blank" href="'+s+'">Add to '+r+"</a>"};var a=function(e){return u(e,"icon-ical","iCal")};var f=function(e){return u(e,"icon-outlook","Outlook")};return{google:s(e),yahoo:o(e),ical:a(e),outlook:f(e)}};if(e.data&&e.data.start&&e.data.duration){t.innerHTML='<label for="add-to-calendar-checkbox" id="add-to-calendar-checkbox-label">+ Add to my Calendar</label>';t.innerHTML+='<input name="add-to-calendar-checkbox" id="add-to-calendar-checkbox" type="checkbox">';var s=i(e.data);Object.keys(s).forEach(function(e){t.innerHTML+=s[e]})}else{console.log("Event details missing.");return}var o=Math.floor(Math.random()*1e6);t.className="add-to-calendar"+(e.options&&e.options.class?" "+e.options.class:"");t.id="add-to-calendar-"+o+(e.options&&e.options.id?" "+e.options.id:"");return t}