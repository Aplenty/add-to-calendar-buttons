function getAddToCalendar(){var e=function(e){var t=60*1e3;var n=function(e){return e.toISOString().replace(/-|:|\.\d+/g,"")};var r=function(e){var r=n(e.start);var i=e.end?n(e.end):n(new Date(e.start.getTime()+e.duration*t));var s=function(e){var t=encodeURI(["https://www.google.com/calendar/render","?action=TEMPLATE","&text="+(e.title||""),"&dates="+(r||""),"/"+(i||""),"&details="+(e.description||""),"&location="+(e.address||""),"&sprop=&sprop=name:"].join(""));return'<a class="icon-google" target="_blank" href="'+t+'">Google Calendar</a>'};var o=function(e){var r=e.end?(e.end.getTime()-e.start.getTime())/t:e.duration;var i=r<600?"0"+Math.floor(r/60):Math.floor(r/60);var s=r%60<10?"0"+r%60:r%60;var o=i+s;var u=encodeURI(["http://calendar.yahoo.com/?v=60&view=d&type=20","&title="+(e.title||""),"&st="+(n(new Date(e.start-e.start.getTimezoneOffset()*t))||""),"&dur="+(o||""),"&desc="+(e.description||""),"&in_loc="+(e.address||"")].join(""));return'<a class="icon-yahoo" target="_blank" href="'+u+'">Yahoo! Calendar</a>'};var u=function(e,t,n){var s=encodeURI("data:text/calendar;charset=utf8,"+["BEGIN:VCALENDAR","VERSION:2.0","BEGIN:VEVENT","URL:"+document.URL,"DTSTART:"+(r||""),"DTEND:"+(i||""),"SUMMARY:"+(e.title||""),"DESCRIPTION:"+(e.description||""),"LOCATION:"+(e.address||""),"END:VEVENT","END:VCALENDAR"].join("\n"));return'<a class="'+t+'" target="_blank" href="'+s+'">'+n+" Calendar</a>"};var a=function(e){return u(e,"icon-ical","iCal")};var f=function(e){return u(e,"icon-outlook","Outlook")};return{google:s(e),yahoo:o(e),ical:a(e),outlook:f(e)}};var i=document.createElement("div");var s=e.options&&e.options.id?e.options.id:Math.floor(Math.random()*1e6);if(e.data&&e.data.start&&(e.data.end||e.data.duration)){i.innerHTML='<label for="checkbox-for-'+s+'" class="add-to-calendar-checkbox">+ Add to my Calendar</label>';i.innerHTML+='<input name="add-to-calendar-checkbox" class="add-to-calendar-checkbox" id="checkbox-for-'+s+'" type="checkbox">';var o=r(e.data);Object.keys(o).forEach(function(e){i.innerHTML+=o[e]})}else{console.log("Event details missing.");return}i.className="add-to-calendar"+(e.options&&e.options.class?" "+e.options.class:"");i.id=s;return i};return e}